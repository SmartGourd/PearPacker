import{d as V,m as q,x as B,r as v,o as R,E as T,c as m,a,b as t,C as $,w as l,B as k,h as g,i as u,s as P,n as y,v as c,p as C,e as f,F as D,f as F,t as b,l as H,j as Q,u as U,k as r,_ as O}from"./index-Ddi_hFB4.js";const _="/PearPacker/assets/mock-qr-code-C5lC3WLi.png",j={class:"setup-layout"},z={class:"invite-section"},A=["value"],E={class:"form-group"},J={class:"form-group"},Y={class:"form-group"},W={class:"form-group"},K={key:0,value:""},X=["value"],Z={key:0,class:"no-sets-message"},h={class:"form-actions"},ee=V({__name:"NewGameSetupView",setup(te){const w=B(),G=U(),i=q(()=>w.params.gameId),s=v({name:"New Game",type:"Rush",timeLimit:5,selectedSetId:""}),d=v([]),p=v(!0),S=v("https://pearpaker.mock/game/join/xyz123");R(async()=>{p.value=!0;try{d.value=await T(),i.value&&(console.log(`Loading settings for game ${i.value}`),await new Promise(n=>setTimeout(n,200)),s.value={name:"My Awesome History Game",type:"Classic",timeLimit:10,selectedSetId:d.value.length>0?d.value[0].id:""})}catch(n){console.error("Failed to load available sets:",n)}finally{p.value=!1}});const N=()=>{navigator.clipboard.writeText(S.value).then(()=>alert("Invite link copied!")).catch(n=>console.error("Failed to copy link: ",n))},L=()=>{console.log("Saving game settings:",JSON.stringify(s.value)),alert("Mock: Game settings saved!")},M=()=>{if(!s.value.selectedSetId){alert("Please select a question set first.");return}console.log("Starting game with settings:",JSON.stringify(s.value)),alert(`Mock: Starting ${s.value.type} game named "${s.value.name}" with set ${s.value.selectedSetId}!`)},I=()=>{confirm("Are you sure you want to delete this game setup?")&&(console.log(`Deleting game ${i.value}`),alert(`Mock: Game ${i.value} deleted.`),G.push({name:"games"}))};return(n,e)=>{const x=H("router-link");return r(),m("div",null,[a($,{title:"New Game Setup",subtitle:i.value?"Modify your game settings":"Configure your new game"},null,8,["subtitle"]),t("div",j,[a(k,{class:"players-panel"},{default:l(()=>[e[7]||(e[7]=t("h5",null,"Connected Players (1)",-1)),e[8]||(e[8]=t("div",{class:"player-list"},[t("div",{class:"player-item host"}," #1 Host (You) ")],-1)),t("div",z,[e[5]||(e[5]=t("h6",null,"Invite via QR Code",-1)),e[6]||(e[6]=t("img",{src:_,alt:"Mock QR Code",class:"qr-code"},null,-1)),t("input",{type:"text",readonly:"",value:S.value,class:"invite-link"},null,8,A),a(g,{size:"sm",variant:"secondary",onClick:N},{default:l(()=>e[4]||(e[4]=[u("Copy Link")])),_:1})])]),_:1}),a(k,{class:"options-panel"},{default:l(()=>[t("form",{onSubmit:P(M,["prevent"])},[e[20]||(e[20]=t("h4",null,"Host Options",-1)),t("div",E,[e[9]||(e[9]=t("label",{for:"gameName"},"Game Name",-1)),y(t("input",{type:"text",id:"gameName","onUpdate:modelValue":e[0]||(e[0]=o=>s.value.name=o),required:""},null,512),[[c,s.value.name]])]),t("div",J,[e[11]||(e[11]=t("label",{for:"gameType"},"Game Type",-1)),y(t("select",{id:"gameType","onUpdate:modelValue":e[1]||(e[1]=o=>s.value.type=o),required:""},e[10]||(e[10]=[t("option",null,"Rush",-1),t("option",null,"Classic",-1),t("option",null,"Race",-1)]),512),[[C,s.value.type]])]),e[21]||(e[21]=t("h4",null,"Game Specific Settings",-1)),t("div",Y,[e[12]||(e[12]=t("label",{for:"timeLimit"},"Number of Minutes (0 for unlimited)",-1)),y(t("input",{type:"number",id:"timeLimit",min:"0",step:"1","onUpdate:modelValue":e[2]||(e[2]=o=>s.value.timeLimit=o)},null,512),[[c,s.value.timeLimit,void 0,{number:!0}]])]),t("div",W,[e[16]||(e[16]=t("label",{for:"questionSet"},"Select Question Set *",-1)),y(t("select",{id:"questionSet","onUpdate:modelValue":e[3]||(e[3]=o=>s.value.selectedSetId=o),required:""},[e[13]||(e[13]=t("option",{disabled:"",value:""},"-- Choose a Set --",-1)),p.value?(r(),m("option",K,"Loading sets...")):f("",!0),(r(!0),m(D,null,F(d.value,o=>(r(),m("option",{key:o.id,value:o.id},b(o.title)+" ("+b(o.questionCount)+" Qs) ",9,X))),128))],512),[[C,s.value.selectedSetId]]),!p.value&&d.value.length===0?(r(),m("p",Z,[e[15]||(e[15]=u(" You need to create a set first. ")),a(x,{to:{name:"edit-set",params:{id:"new"}}},{default:l(()=>e[14]||(e[14]=[u("Create Set")])),_:1})])):f("",!0)]),t("div",h,[a(g,{type:"button",variant:"secondary",onClick:L},{default:l(()=>e[17]||(e[17]=[u("Save Settings")])),_:1}),a(g,{type:"submit",variant:"success",disabled:!s.value.selectedSetId},{default:l(()=>e[18]||(e[18]=[u("Start Game")])),_:1},8,["disabled"]),i.value?(r(),Q(g,{key:0,type:"button",variant:"danger",onClick:I},{default:l(()=>e[19]||(e[19]=[u("Delete Game")])),_:1})):f("",!0)])],32)]),_:1})])])}}}),oe=O(ee,[["__scopeId","data-v-2f1c45b9"]]);export{oe as default};
