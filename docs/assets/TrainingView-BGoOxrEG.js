import{d as E,m as F,x as K,r as i,o as j,y as P,c as d,e as _,b as s,j as w,a as k,t as a,w as u,h as p,D as G,B as x,i as f,l as O,F as R,f as U,q as H,k as t,_ as J}from"./index-McnLfPPq.js";import{g as W}from"./questions-BBaXMyyM.js";const X={class:"training-container"},Z={key:0},ee={key:1},se={class:"training-header"},te={class:"set-title"},le={class:"training-tabs"},ne={class:"progress-section"},ae={class:"progress-bar-container"},ue={key:0},oe={class:"question-header"},re={class:"question-text"},ie={key:0,class:"options-container"},ve=["onClick"],de={key:1,class:"feedback-area"},ce={key:0,class:"feedback-correct"},fe={key:1,class:"feedback-incorrect"},ge={key:0},ke={key:2,class:"did-you-know"},pe={class:"did-you-know-buttons"},ye={class:"action-button"},me={key:2},_e=E({__name:"TrainingView",setup(he){const V=K(),A=F(()=>V.params.id),q=i(null),l=i([]),y=i(0),v=i([]),g=i(!1),m=i(!1),C=i(0),Q=i(0),b=i(!0),M=i(!0),S=i("Training"),T=i(!1),h=i(!1),c=i({1:0,2:0,3:0,4:0}),o=F(()=>l.value.length>0&&y.value<l.value.length?l.value[y.value]:null),I=F(()=>{if(l.value.length===0)return 0;const n=Math.round(y.value/l.value.length*100);return T.value?100:n});j(async()=>{b.value=!0,M.value=!0;try{const n=await P(A.value);n?(q.value=n,l.value=await W(A.value),l.value.length>0&&(c.value[1]=l.value.length)):console.error("Set not found")}catch(n){console.error("Error loading training data:",n)}finally{b.value=!1,M.value=!1}});const $=n=>{if(o.value)if(o.value.answerType==="SINGLE")v.value=[n];else{const e=v.value.indexOf(n);e>-1?v.value.splice(e,1):v.value.push(n)}},D=()=>{if(!o.value||v.value.length===0)return;g.value=!0;const n=o.value.correctAnswers,e=v.value.every(r=>n.includes(r)),B=n.every(r=>v.value.includes(r));m.value=e&&B&&v.value.length===n.length,m.value?(C.value++,c.value[1]=(c.value[1]||1)-1,c.value[2]=(c.value[2]||0)+1):Q.value++,h.value=!m.value&&Math.random()<.5},Y=()=>{y.value<l.value.length-1?(y.value++,g.value=!1,v.value=[],m.value=!1,h.value=!1):(console.log("Training Finished!"),T.value=!0,g.value=!1)},z=()=>{y.value=0,v.value=[],g.value=!1,m.value=!1,C.value=0,Q.value=0,T.value=!1,h.value=!1,c.value={1:0,2:0,3:0,4:0},l.value.length>0&&(c.value[1]=l.value.length)},N=n=>{console.log(`User marked 'Did you know?' as ${n?"Yes":"No"}`),h.value=!1};return(n,e)=>{const B=O("router-link");return t(),d("div",X,[b.value?(t(),d("p",Z,"Loading set information...")):q.value?(t(),d("div",ee,[s("div",se,[s("div",null,[s("h2",te,"Training: "+a(q.value.title),1),e[4]||(e[4]=s("p",{class:"set-subtitle"},"Keep practicing to improve your mastery!",-1))]),s("div",le,[k(p,{variant:S.value==="Training"?"secondary":"light",onClick:e[0]||(e[0]=r=>S.value="Training")},{default:u(()=>e[5]||(e[5]=[f("Training")])),_:1},8,["variant"]),k(p,{variant:S.value==="Flashcards"?"secondary":"light",onClick:e[1]||(e[1]=r=>S.value="Flashcards")},{default:u(()=>e[6]||(e[6]=[f("Flashcards")])),_:1},8,["variant"])])]),s("div",ne,[e[7]||(e[7]=s("span",null,"Mastery Progress",-1)),s("div",ae,[s("div",{class:"progress-bar",style:G({width:I.value+"%"})},a(I.value)+"% ",5)])]),M.value?(t(),d("p",ue,"Loading questions...")):!o.value&&l.value.length===0?(t(),w(x,{key:1},{default:u(()=>[e[9]||(e[9]=s("p",null,"This set currently has no questions.",-1)),k(B,{to:{name:"edit-set",params:{id:A.value}}},{default:u(()=>[k(p,null,{default:u(()=>e[8]||(e[8]=[f("Add Questions")])),_:1})]),_:1},8,["to"])]),_:1})):!o.value&&l.value.length>0&&T.value?(t(),w(x,{key:2},{default:u(()=>[e[12]||(e[12]=s("h3",null,"Training Complete!",-1)),e[13]||(e[13]=s("p",null,"You've answered all questions in this session.",-1)),s("p",null,"Your Score: "+a(C.value)+" / "+a(l.value.length),1),k(p,{onClick:z},{default:u(()=>e[10]||(e[10]=[f("Train Again")])),_:1}),k(B,{to:{name:"my-sets"}},{default:u(()=>[k(p,{variant:"light"},{default:u(()=>e[11]||(e[11]=[f("Back to My Sets")])),_:1})]),_:1})]),_:1})):o.value?(t(),w(x,{key:3,class:"question-card"},{default:u(()=>[s("div",oe," Question "+a(y.value+1)+" of "+a(l.value.length),1),s("p",re,a(o.value.text),1),o.value.questionType==="MCQ"?(t(),d("div",ie,[(t(!0),d(R,null,U(o.value.options,(r,L)=>(t(),d("div",{key:L,onClick:we=>g.value?null:$(r),class:H(["option",{selected:v.value.includes(r)},{correct:g.value&&o.value.correctAnswers.includes(r)},{incorrect:g.value&&v.value.includes(r)&&!o.value.correctAnswers.includes(r)},{disabled:g.value}])},a(r),11,ve))),128))])):_("",!0),g.value?(t(),d("div",de,[m.value?(t(),d("p",ce,"Correct!")):(t(),d("p",fe,[e[14]||(e[14]=f(" Incorrect. ")),o.value.questionType==="MCQ"?(t(),d("span",ge," Correct answer(s): "+a(o.value.correctAnswers.join(", ")),1)):_("",!0)])),h.value?(t(),d("div",ke,[e[17]||(e[17]=s("strong",null,"Did you know?",-1)),e[18]||(e[18]=f(" Some interesting fact related to the question could go here. ")),s("div",pe,[k(p,{variant:"success",size:"sm",onClick:e[2]||(e[2]=r=>N(!0))},{default:u(()=>e[15]||(e[15]=[f("Yes")])),_:1}),k(p,{variant:"danger",size:"sm",onClick:e[3]||(e[3]=r=>N(!1))},{default:u(()=>e[16]||(e[16]=[f("No")])),_:1})])])):_("",!0)])):_("",!0),s("div",ye,[g.value?(t(),w(p,{key:1,onClick:Y,variant:"success"},{default:u(()=>[f(a(y.value===l.value.length-1?"Finish Session":"Next Question"),1)]),_:1})):(t(),w(p,{key:0,onClick:D,disabled:v.value.length===0,variant:"primary"},{default:u(()=>e[19]||(e[19]=[f(" Submit Answer ")])),_:1},8,["disabled"]))])]),_:1})):_("",!0),k(x,{class:"stats-card"},{default:u(()=>[e[20]||(e[20]=s("h4",null,"Statistics",-1)),s("p",null,"Total Questions: "+a(l.value.length),1),s("p",null,"Correct Answers: "+a(C.value),1),s("p",null,"Incorrect Answers: "+a(Q.value),1),s("p",null,"Bucket 1: "+a(c.value[1]||0),1),s("p",null,"Bucket 2: "+a(c.value[2]||0),1),s("p",null,"Bucket 3: "+a(c.value[3]||0),1),s("p",null,"Bucket 4 (Mastered): "+a(c.value[4]||0),1)]),_:1})])):b.value?_("",!0):(t(),d("p",me,"Set not found or could not be loaded."))])}}}),Se=J(_e,[["__scopeId","data-v-cf1d8dc3"]]);export{Se as default};
